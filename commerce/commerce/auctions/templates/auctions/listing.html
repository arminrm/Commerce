{% extends "auctions/layout.html" %}

{% block body %}
    <ul>Seller: {{ listing.seller }}</ul>
    <ul>Title: {{ listing.title }}</ul>
    <ul>Current Bid: ${{ listing.current_bid }}</ul>
    <ul>Description: {{ listing.description }}</ul>
    {% if listing.active %}
        {% if listing.seller != bidder %}
            <form action="{% url 'listing' listing.id %}" method="post">
                {% csrf_token %}
                {{ form }}
            <input type="submit" name="form" >
            </form>
            {% if watchlist == False %}
                <form action="{% url 'listing' listing.id %}" method="post">
                    {% csrf_token %}
                    <br>
                    <input type="submit" value="Add to Watchlist" name="watchlist">
                </form>
            {% else %}
                <form action="{% url 'listing' listing.id %}" method="post">
                    {% csrf_token %}
                    <br>
                    <input type="submit" value="Remove from Watchlist" name="remove-watchlist">
                </form>
            {% endif %}
            <div>{{ message }}</div>
        {% else %}
            <form action="{% url 'listing' listing.id %}" method="post">
                {% csrf_token %}
                <br>
                <input type="submit" value="Close Auction" name= "close">
            </form>
        {% endif %}
    {% else %}
        {% if exists %}
            {% for bid in bids %}
                {% if bid.bidder == bidder %}
                    <h2>You won the auction!</h2>
                {% else %}
                    <h2>Auction Closed.</h2>
                {% endif %}
            {% endfor %}
        {% else %}
            <h2>Auction Closed.</h2>
        {% endif %}
    {% endif %}
    <div>
        {% if comments != False %}
        <br>
        <h2>Comments:</h2>
        <br>
            {% for comment in comments %}
            <li> {{ comment }}</li>
            {% endfor %}
        {% endif %}
    </div>
{% endblock %}